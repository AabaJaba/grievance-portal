<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Navnoor & Jahanvi's Love Portal</title>
        <meta name="description" content="A private space for Navnoor and Jahanvi to lovingly track and resolve disagreements">
        <meta name="theme-color" content="#8B5CF6">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Tailwind CSS (Development CDN - for production, use Tailwind CLI) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    
    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="bg-gray-50 min-h-screen">


    <!-- Portal Entry Screen -->
    <div id="portalEntry" class="min-h-screen bg-gray-50 flex items-center justify-center px-4">
        <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-8 max-w-md w-full">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-800 mb-2">ðŸ’•Love Portal</h1>
                <p class="text-gray-600">Enter your shared portal to connect</p>
            </div>
            
            <form id="portalForm" class="space-y-6">
                <div>
                    <label for="portalInput" class="block text-sm font-medium text-gray-700 mb-2">Portal ID</label>
                    <input 
                        type="text" 
                        id="portalInput" 
                        required
                        class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-200 text-center text-lg font-mono"
                        placeholder="Enter Portal ID"
                        maxlength="6"
                    >
                    <p class="text-sm text-gray-500 mt-2">Ask your partner for the Portal ID</p>
                </div>
                
                <button 
                    type="submit"
                    class="w-full bg-gradient-to-r from-pink-500 to-purple-600 text-white py-3 px-6 rounded-full font-medium btn-hover hover:from-pink-600 hover:to-purple-700 flex items-center justify-center"
                >
                    <i data-feather="heart" class="w-5 h-5 mr-2"></i>
                    Connect to Portal
                </button>
            </form>
            
            <div class="mt-6 text-center">
                <button 
                    id="createNewPortal"
                    class="text-purple-600 hover:text-purple-700 font-medium"
                >
                    Create New Portal
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="fixed inset-0 bg-gray-50 flex items-center justify-center z-50 hidden">
        <div class="text-center">
            <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mx-auto mb-4"></div>
            <p class="text-gray-600 text-lg">Loading your portal...</p>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="hidden">
        <!-- Header -->
        <header class="bg-white shadow-sm border-b border-gray-100">
            <div class="max-w-4xl mx-auto px-4 py-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-800">ðŸ’• N & J's Love Portal</h1>
                        <p class="text-gray-600 mt-1">A loving space to resolve together</p>
                    </div>
                    <div class="text-right">
                        <p class="text-sm text-gray-500">Portal ID</p>
                        <p id="portalId" class="font-mono text-sm bg-gray-100 px-2 py-1 rounded text-gray-700"></p>
                        <div class="flex gap-2 mt-1">
                            <button 
                                id="copyPortalId"
                                class="text-xs text-purple-600 hover:text-purple-700 px-2 py-1 rounded hover:bg-purple-50"
                            >
                                Copy ID
                            </button>
                        </div>
                        <div class="mt-2 text-xs text-gray-500">
                            <p id="meetingDateDisplay" class="hidden">Meeting: <span id="meetingDateText"></span></p>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="max-w-4xl mx-auto px-4 py-8">
            <!-- Add Grievance Form -->
            <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-8">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-semibold text-gray-800 flex items-center">
                        <i data-feather="plus-circle" class="w-5 h-5 mr-2 text-purple-600"></i>
                        Add New Grievance
                    </h2>
                    <button 
                        id="switchPortalMain"
                        class="text-sm bg-rose-50 text-rose-700 hover:bg-rose-100 px-3 py-2 rounded-lg border border-rose-200 font-medium transition-colors duration-200"
                    >
                        ðŸ”„ Switch Portal
                    </button>
                </div>
                <form id="grievanceForm" class="space-y-4">
                    <div>
                        <label for="title" class="block text-sm font-medium text-gray-700 mb-2">Title</label>
                        <input 
                            type="text" 
                            id="title" 
                            required
                            class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200"
                            placeholder="What's on your mind?"
                        >
                    </div>
                    <div>
                        <label for="description" class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea 
                            id="description" 
                            required
                            rows="3"
                            class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 resize-none"
                            placeholder="Share the details with love..."
                        ></textarea>
                    </div>
                    <button 
                        type="submit"
                        class="w-full bg-gradient-to-r from-pink-500 to-purple-600 text-white py-3 px-6 rounded-full font-medium btn-hover hover:from-pink-600 hover:to-purple-700 flex items-center justify-center"
                    >
                        <i data-feather="heart" class="w-5 h-5 mr-2"></i>
                        Submit with Love
                    </button>
                </form>
            </div>

            <!-- Grievances List -->
            <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-6 flex items-center">
                                            <i data-feather="list" class="w-5 h-5 mr-2 text-purple-600"></i>
                    Our Grievances
                </h2>
                
                <!-- Status Filter -->
                <div class="flex flex-wrap gap-2 mb-6">
                    <button 
                        class="status-filter px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 active bg-purple-100 text-purple-700"
                        data-status="all"
                    >
                        All
                    </button>
                    <button 
                        class="status-filter px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 bg-gray-100 text-gray-600"
                        data-status="pending"
                    >
                        Pending
                    </button>
                    <button 
                        class="status-filter px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 bg-gray-100 text-gray-600"
                        data-status="in-progress"
                    >
                        In Progress
                    </button>
                    <button 
                        class="status-filter px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 bg-gray-100 text-gray-600"
                        data-status="resolved"
                    >
                        Resolved
                    </button>
                </div>

                <!-- Grievances Container -->
                <div id="grievancesContainer" class="space-y-4">
                    <!-- Grievances will be populated here -->
                </div>

                <!-- Empty State -->
                <div id="emptyState" class="text-center py-12 hidden">
                    <i data-feather="heart" class="w-16 h-16 text-gray-300 mx-auto mb-4"></i>
                    <h3 class="text-lg font-medium text-gray-600 mb-2">No grievances yet!</h3>
                    <p class="text-gray-500">Add your first grievance above to get started.</p>
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript Modules -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/firebase.js"></script>
    <script src="js/countdown.js"></script>
    <script src="js/app.js"></script>
    
    <!-- Initialize App -->
    <script>
        // Initialize the app when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            app.initialize();
        });

        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then((registration) => {
                        console.log('SW registered: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }


    </script>
</body>
</html> 